<dom-module id="fc-login">
  <style>
  </style>
  <template>
    <h1>Login</h1>
    <paper-input
      id="inputUsername"
      label="Username"></paper-input>
    <paper-input
      id="inputPassword"
      label="Password"></paper-input>
    <paper-button
      on-click="login"
      raised>Login</paper-button>

    <iron-ajax
      id="ajax"
      url="/auth/local"
      content-type="application/json"
      method="POST"
      handle-as="json"
      on-response="handleResponse"
      last-response="{{response}}"
    ></iron-ajax>
  </template>
  <script>
    (function(){
      'use strict';

      Polymer({
        is: 'fc-login',

        properties: {
          token: String
        },

        login: function(){
          var ajaxCall = this.$.ajax;
          var username = this.$.inputUsername.value;
          var password = this.$.inputPassword.value;
          ajaxCall.body = JSON.stringify({
            username: username,
            password: password
          });

          ajaxCall.generateRequest();
        },

        handleResponse: function(e, req){
          this.token = this.response;
        }
      });
    })();
  </script>
</dom-module>
